"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[738],{604:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"strolt/configuration/examples","title":"Examples","description":"Example1","source":"@site/docs/strolt/configuration/examples.md","sourceDirName":"strolt/configuration","slug":"/strolt/configuration/examples","permalink":"/docs/strolt/configuration/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/strolt/strolt/edit/main/website/docs/strolt/configuration/examples.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"telegram","permalink":"/docs/strolt/configuration/drivers/notification/telegram"},"next":{"title":"ENV","permalink":"/docs/strolt/configuration/env"}}');var r=t(7259),o=t(9796);const i={sidebar_position:3},a="Examples",l={},c=[{value:"Example1",id:"example1",level:2},{value:"Example2",id:"example2",level:2}];function m(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"examples",children:"Examples"})}),"\n",(0,r.jsx)(e.h2,{id:"example1",children:"Example1"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:"title=strolt.yml"})}),"\n",(0,r.jsx)(e.h2,{id:"example2",children:"Example2"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:"title=strolt.yml",children:'timezone: America/New_York\n\ntags:\n  - tag1:value\n  - tag2:value\n  - tag3:value\n\nservices:\n  example:\n    database:\n      tags:\n        - taskTag\n      schedule:\n        backup: "0 0 * * *"\n        prune: "0 20 * * *"\n      source:\n        driver: pg\n        config:\n          host: "{{.PG_HOST}}"\n          database: "{{.PG_DATABASE}}"\n          username: "{{.PG_USER}}"\n          password: "{{.PG_PASSWORD}}"\n      destinations:\n        restic-postgres:\n          extends: minio_restic\n          env:\n            RESTIC_PASSWORD: "{{.RESTIC_PASSWORD}}"\n            RESTIC_REPOSITORY: "s3:{{.MINIO_S3_URL}}/EXAMPLE2/restic-postgres"\n      notifications:\n        - telegram\n        - errors\n\nsecrets:\n  RESTIC_PASSWORD: password\n\n  PG_HOST: postgres\n  PG_DATABASE: strolt\n  PG_USER: strolt_user\n  PG_PASSWORD: strolt_password\n\nextends:\n  secrets:\n    - ./strolt.secrets.yml\n  configs:\n    - ./strolt.base.yml\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:"title=strolt.base.yml",children:'definitions:\n  notifications:\n    telegram:\n      driver: telegram\n      config:\n        token: "{{.TELEGRAM_TOKEN}}"\n        chatId: "{{.TELEGRAM_CHAT_ID}}"\n    errors:\n      driver: telegram\n      config:\n        token: "{{.TELEGRAM_TOKEN}}"\n        chatId: "{{.TELEGRAM_CHAT_ID}}"\n      events:\n        - OPERATION_ERROR\n        - SOURCE_ERROR\n        - DESTINATION_ERROR\n\n  destinations:\n    minio_restic:\n      driver: restic\n      config:\n        keep:\n          last: 3\n      env:\n        AWS_ACCESS_KEY_ID: "{{.MINIO_S3_ACCESS_KEY_ID}}"\n        AWS_SECRET_ACCESS_KEY: "{{.MINIO_S3_SECRET_ACCESS_KEY}}"\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:"title=strolt.secrets.yml",children:"MINIO_S3_URL: http://minio:9000\nMINIO_S3_ACCESS_KEY_ID: minioadmin\nMINIO_S3_SECRET_ACCESS_KEY: minioadmin\n\nTELEGRAM_TOKEN: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\nTELEGRAM_CHAT_ID: 1234567890\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:"title=docker-compose.yml",children:"services:\n  minio:\n    image: minio/minio:RELEASE.2022-08-13T21-54-44Z\n    command: server --address 0.0.0.0:9000 --console-address 0.0.0.0:9001 /data\n    ports:\n      - 9000:9000\n      - 9001:9001\n    volumes:\n      - minio:/data\n    environment:\n      MINIO_ROOT_USER: minioadmin\n      MINIO_ROOT_PASSWORD: minioadmin\n    networks:\n      - strolt_network\n\n  postgres:\n    image: postgres:13.2-alpine\n    environment:\n      TZ: UTC\n      POSTGRES_DB: strolt\n      POSTGRES_PASSWORD: strolt_password\n      POSTGRES_USER: strolt_user\n    volumes:\n      - postgres:/var/lib/postgresql/data\n    networks:\n      - strolt_network\n\n  strolt:\n    image: strolt/strolt:latest\n    depends_on:\n      - postgres\n    restart: always\n    environment:\n      - STROLT_GLOBAL_TAGS=postgres:13.2-alpine\n    volumes:\n      - ./strolt.yml:/strolt/config.yml:ro\n      - ./strolt.secrets.yml:/strolt/strolt.secrets.yml:ro\n      - ./strolt.base.yml:/strolt/strolt.base.yml:ro\n    networks:\n      - strolt_network\n\nnetworks:\n  strolt_network:\n\nvolumes:\n  minio:\n  postgres:\n"})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(m,{...n})}):m(n)}},9796:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>a});var s=t(6363);const r={},o=s.createContext(r);function i(n){const e=s.useContext(o);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),s.createElement(o.Provider,{value:e},n.children)}}}]);