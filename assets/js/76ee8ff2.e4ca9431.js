"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[462],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>v});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),d=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=d(e.components);return i.createElement(s.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=d(t),m=a,v=c["".concat(s,".").concat(m)]||c[m]||u[m]||r;return t?i.createElement(v,l(l({ref:n},p),{},{components:t})):i.createElement(v,l({ref:n},p))}));function v(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,l=new Array(r);l[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[c]="string"==typeof e?e:a,l[1]=o;for(var d=2;d<r;d++)l[d]=t[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8282:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var i=t(7462),a=(t(7294),t(3905));const r={sidebar_position:2},l="Configuration",o={unversionedId:"strolt/configuration/configuration",id:"strolt/configuration/configuration",title:"Configuration",description:"Status of this document",source:"@site/docs/strolt/configuration/configuration.md",sourceDirName:"strolt/configuration",slug:"/strolt/configuration/",permalink:"/docs/strolt/configuration/",draft:!1,editUrl:"https://github.com/strolt/strolt/edit/main/website/docs/strolt/configuration/configuration.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Getting started",permalink:"/docs/strolt/getting-started"},next:{title:"Drivers",permalink:"/docs/strolt/configuration/drivers/"}},s={},d=[{value:"Status of this document",id:"status-of-this-document",level:2},{value:"Strolt file",id:"strolt-file",level:2},{value:"TimeZone top-level element",id:"timezone-top-level-element",level:2},{value:"Tags top-level element",id:"tags-top-level-element",level:2},{value:"Services top-level element <code>(REQUIRED)</code>",id:"services-top-level-element-required",level:2},{value:"tags",id:"tags",level:3},{value:"schedule",id:"schedule",level:3},{value:"backup",id:"backup",level:4},{value:"prune",id:"prune",level:4},{value:"source <code>(REQUIRED)</code>",id:"source-required",level:3},{value:"driver <code>(REQUIRED)</code>",id:"driver-required",level:4},{value:"config",id:"config",level:4},{value:"env",id:"env",level:4},{value:"destinations <code>(REQUIRED)</code>",id:"destinations-required",level:3},{value:"extends",id:"extends",level:4},{value:"driver <code>(REQUIRED)</code>",id:"driver-required-1",level:4},{value:"config",id:"config-1",level:4},{value:"env",id:"env-1",level:4},{value:"notifications",id:"notifications",level:3},{value:"Secrets top-level element",id:"secrets-top-level-element",level:2},{value:"Extends top-level element",id:"extends-top-level-element",level:2},{value:"secrets",id:"secrets",level:3},{value:"configs",id:"configs",level:3},{value:"Definitions top-level element",id:"definitions-top-level-element",level:2},{value:"destinations",id:"destinations",level:3},{value:"driver <code>(REQUIRED)</code>",id:"driver-required-2",level:4},{value:"config",id:"config-2",level:4},{value:"env",id:"env-2",level:4},{value:"notifications",id:"notifications-1",level:3},{value:"driver <code>(REQUIRED)</code>",id:"driver-required-3",level:4},{value:"config",id:"config-3",level:4},{value:"events",id:"events",level:4}],p={toc:d},c="wrapper";function u(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"configuration"},"Configuration"),(0,a.kt)("h2",{id:"status-of-this-document"},"Status of this document"),(0,a.kt)("p",null,"This document specifies the Compose file format used to define multi-containers applications. Distribution of this document is unlimited."),(0,a.kt)("p",null,"The key words ",(0,a.kt)("inlineCode",{parentName:"p"},"MUST"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"MUST NOT"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"REQUIRED"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"SHALL"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"SHALL NOT"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"SHOULD"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"SHOULD NOT"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"RECOMMENDED"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"MAY"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"OPTIONAL")," in this document are to be interpreted as described in ",(0,a.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc2119"},"RFC 2119"),"."),(0,a.kt)("h2",{id:"strolt-file"},"Strolt file"),(0,a.kt)("p",null,"The Strolt file is a YAML file defining services (REQUIRED), timezone, tags, secrets, extends and definitions. The default path for a Strolt file is strolt.yaml (preferred) or strolt.yml in working directory. If both files exist, Strolt implementations MUST prefer canonical strotl.yaml one."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'# IANA Time Zone Default: Local\ntimezone: UTC\n\ndisableWatchChanges: false\n\ntags:\n  - tag1:value\n  - tag2:value\n  - tag3:value\n\nservices:\n  service-name:\n    task-name:\n      schedule:\n        backup: "*/5 * * * *"\n        prune: "*/5 * * * *"\n      tags:\n        - tag1:value\n        - tag2:value\n        - tag3:value\n      source:\n      destinations:\n      notifications:\n        - telegram\n\nsecrets:\n  SUPER_SECRET: SECRET\n\nextends:\n  secrets:\n    - ./secrets.yml\n  configs:\n    - ./strolt_config.yml\n\ndefinitions:\n  destinations:\n    destination-template:\n      driver: restic\n      config:\n        keep:\n          last: 5\n\n  notifications:\n    telegram:\n      driver: telegram\n      config:\n        token: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\n        chatId: 1234567890\n')),(0,a.kt)("h2",{id:"timezone-top-level-element"},"TimeZone top-level element"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"timezone"),": IANA Time Zone Default: Local"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"timezone: UTC\n")),(0,a.kt)("h2",{id:"tags-top-level-element"},"Tags top-level element"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"tags"),": array of strings"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"tags:\n  - tag1:v0.01\n  - tag2\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"OR")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"tags: [tag1:v0.01, tag2]\n")),(0,a.kt)("h2",{id:"services-top-level-element-required"},"Services top-level element ",(0,a.kt)("inlineCode",{parentName:"h2"},"(REQUIRED)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"services"),": map of services"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  service-name:\n    task-name:\n      tags:\n      schedule:\n      source:\n        driver: pg\n          config:\n            host: 127.0.0.1\n            port: 5432\n            database: pg_database\n            username: pg_username\n            password: pg_password\n      destinations:\n      notifications:\n\n")),(0,a.kt)("h3",{id:"tags"},"tags"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"tags"),": array of strings"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"tags:\n  - tag1:v0.01\n  - tag2\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"OR")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"tags: [tag1:v0.01, tag2]\n")),(0,a.kt)("h3",{id:"schedule"},"schedule"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"schedule"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'schedule:\n  # run every day at 6:00 and 18:00 UTC\n  backup: "0 6,18 */1 * *"\n\n  # run every day at 6:00 and 18:00 UTC\n  prune: "0 6,18 */1 * *"\n')),(0,a.kt)("h4",{id:"backup"},"backup"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"backup"),": cron rule"),(0,a.kt)("h4",{id:"prune"},"prune"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"prune"),": cron rule"),(0,a.kt)("h3",{id:"source-required"},"source ",(0,a.kt)("inlineCode",{parentName:"h3"},"(REQUIRED)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"source"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"source:\n  driver: pg\n    config:\n      host: 127.0.0.1\n      port: 5432\n      database: pg_database\n      username: pg_username\n      password: pg_password\n")),(0,a.kt)("h4",{id:"driver-required"},"driver ",(0,a.kt)("inlineCode",{parentName:"h4"},"(REQUIRED)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"driver"),":"),(0,a.kt)("h4",{id:"config"},"config"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"config"),":"),(0,a.kt)("h4",{id:"env"},"env"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"env"),":"),(0,a.kt)("h3",{id:"destinations-required"},"destinations ",(0,a.kt)("inlineCode",{parentName:"h3"},"(REQUIRED)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"destinations"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  {service name}:\n    {task name}:\n      ...\n      destinations:\n        restic:\n          driver: restic\n          config:\n          env:\n\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"OR")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  {service name}:\n    {task name}:\n      ...\n      destinations:\n        restic:\n          extends: {definition template}\n\ndefinitions:\n  destinations:\n    {definition template}:\n      driver: restic\n      config:\n      env:\n\n")),(0,a.kt)("h4",{id:"extends"},"extends"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"extends"),":"),(0,a.kt)("h4",{id:"driver-required-1"},"driver ",(0,a.kt)("inlineCode",{parentName:"h4"},"(REQUIRED)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"driver"),": ",(0,a.kt)("a",{parentName:"p",href:"/docs/strolt/configuration/drivers/source/local"},"source")),(0,a.kt)("h4",{id:"config-1"},"config"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"config"),":"),(0,a.kt)("h4",{id:"env-1"},"env"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"env"),":"),(0,a.kt)("h3",{id:"notifications"},"notifications"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"notifications"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  {service name}:\n    {task name}:\n      ...\n      notifications:\n        - tg\n\n    {task2 name}:\n      ...\n      notifications:\n        - tg-errors\n\ndefinitions:\n  notifications:\n    tg:\n      driver: telegram\n      config:\n        token: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\n        chatId: 1234567890\n    tg-errors:\n      driver: telegram\n      config:\n        token: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\n        chatId: 1234567890\n      events: [OPERATION_ERROR, SOURCE_ERROR, DESTINATION_ERROR]\n")),(0,a.kt)("h2",{id:"secrets-top-level-element"},"Secrets top-level element"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"secrets"),": map of key value"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"secrets:\n  SECRET_ONE: VALUE\n  SECRET_TWO: VALUE\n")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},'Store important data in files with secrets that are included in the "extends" section')),(0,a.kt)("h2",{id:"extends-top-level-element"},"Extends top-level element"),(0,a.kt)("h3",{id:"secrets"},"secrets"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"secrets"),": array of paths"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"extends:\n  secrets:\n    - strolt.secrets.yml\n")),(0,a.kt)("h3",{id:"configs"},"configs"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"configs"),": array of paths"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"extends:\n  configs:\n    - strolt.base.yml\n")),(0,a.kt)("h2",{id:"definitions-top-level-element"},"Definitions top-level element"),(0,a.kt)("h3",{id:"destinations"},"destinations"),(0,a.kt)("h4",{id:"driver-required-2"},"driver ",(0,a.kt)("inlineCode",{parentName:"h4"},"(REQUIRED)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"driver"),": ",(0,a.kt)("a",{parentName:"p",href:"/docs/strolt/configuration/drivers/source/local"},"source")),(0,a.kt)("h4",{id:"config-2"},"config"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"config"),":"),(0,a.kt)("h4",{id:"env-2"},"env"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"env"),":"),(0,a.kt)("h3",{id:"notifications-1"},"notifications"),(0,a.kt)("h4",{id:"driver-required-3"},"driver ",(0,a.kt)("inlineCode",{parentName:"h4"},"(REQUIRED)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"driver"),": ",(0,a.kt)("a",{parentName:"p",href:"/docs/strolt/configuration/drivers/source/local"},"source")),(0,a.kt)("h4",{id:"config-3"},"config"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"config"),":"),(0,a.kt)("h4",{id:"events"},"events"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"events"),": array of ","[",(0,a.kt)("inlineCode",{parentName:"p"},"OPERATION_START"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"OPERATION_STOP"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"OPERATION_ERROR"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"SOURCE_START"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"SOURCE_STOP"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"SOURCE_ERROR"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"DESTINATION_START"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"DESTINATION_STOP"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"DESTINATION_ERROR"),"]"))}u.isMDXComponent=!0}}]);