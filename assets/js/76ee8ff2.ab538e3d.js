"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[28],{9684:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"strolt/configuration/configuration","title":"Configuration","description":"Status of this document","source":"@site/docs/strolt/configuration/configuration.md","sourceDirName":"strolt/configuration","slug":"/strolt/configuration/","permalink":"/docs/strolt/configuration/","draft":false,"unlisted":false,"editUrl":"https://github.com/strolt/strolt/edit/main/website/docs/strolt/configuration/configuration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Getting started","permalink":"/docs/strolt/getting-started"},"next":{"title":"Drivers","permalink":"/docs/strolt/configuration/drivers/"}}');var r=i(7259),l=i(9796);const d={sidebar_position:2},t="Configuration",c={},o=[{value:"Status of this document",id:"status-of-this-document",level:2},{value:"Strolt file",id:"strolt-file",level:2},{value:"TimeZone top-level element",id:"timezone-top-level-element",level:2},{value:"Tags top-level element",id:"tags-top-level-element",level:2},{value:"Services top-level element <code>(REQUIRED)</code>",id:"services-top-level-element-required",level:2},{value:"tags",id:"tags",level:3},{value:"schedule",id:"schedule",level:3},{value:"backup",id:"backup",level:4},{value:"prune",id:"prune",level:4},{value:"source <code>(REQUIRED)</code>",id:"source-required",level:3},{value:"driver <code>(REQUIRED)</code>",id:"driver-required",level:4},{value:"config",id:"config",level:4},{value:"env",id:"env",level:4},{value:"destinations <code>(REQUIRED)</code>",id:"destinations-required",level:3},{value:"extends",id:"extends",level:4},{value:"driver <code>(REQUIRED)</code>",id:"driver-required-1",level:4},{value:"config",id:"config-1",level:4},{value:"env",id:"env-1",level:4},{value:"notifications",id:"notifications",level:3},{value:"Secrets top-level element",id:"secrets-top-level-element",level:2},{value:"Extends top-level element",id:"extends-top-level-element",level:2},{value:"secrets",id:"secrets",level:3},{value:"configs",id:"configs",level:3},{value:"Definitions top-level element",id:"definitions-top-level-element",level:2},{value:"destinations",id:"destinations",level:3},{value:"driver <code>(REQUIRED)</code>",id:"driver-required-2",level:4},{value:"config",id:"config-2",level:4},{value:"env",id:"env-2",level:4},{value:"notifications",id:"notifications-1",level:3},{value:"driver <code>(REQUIRED)</code>",id:"driver-required-3",level:4},{value:"config",id:"config-3",level:4},{value:"events",id:"events",level:4}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,r.jsx)(n.h2,{id:"status-of-this-document",children:"Status of this document"}),"\n",(0,r.jsx)(n.p,{children:"This document specifies the Compose file format used to define multi-containers applications. Distribution of this document is unlimited."}),"\n",(0,r.jsxs)(n.p,{children:["The key words ",(0,r.jsx)(n.code,{children:"MUST"}),", ",(0,r.jsx)(n.code,{children:"MUST NOT"}),", ",(0,r.jsx)(n.code,{children:"REQUIRED"}),", ",(0,r.jsx)(n.code,{children:"SHALL"}),", ",(0,r.jsx)(n.code,{children:"SHALL NOT"}),", ",(0,r.jsx)(n.code,{children:"SHOULD"}),", ",(0,r.jsx)(n.code,{children:"SHOULD NOT"}),", ",(0,r.jsx)(n.code,{children:"RECOMMENDED"}),", ",(0,r.jsx)(n.code,{children:"MAY"}),", and ",(0,r.jsx)(n.code,{children:"OPTIONAL"})," in this document are to be interpreted as described in ",(0,r.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc2119",children:"RFC 2119"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"strolt-file",children:"Strolt file"}),"\n",(0,r.jsx)(n.p,{children:"The Strolt file is a YAML file defining services (REQUIRED), timezone, tags, secrets, extends and definitions. The default path for a Strolt file is strolt.yaml (preferred) or strolt.yml in working directory. If both files exist, Strolt implementations MUST prefer canonical strotl.yaml one."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# IANA Time Zone Default: Local\ntimezone: UTC\n\ndisableWatchChanges: false\n\ntags:\n  - tag1:value\n  - tag2:value\n  - tag3:value\n\nservices:\n  service-name:\n    task-name:\n      schedule:\n        backup: "*/5 * * * *"\n        prune: "*/5 * * * *"\n      tags:\n        - tag1:value\n        - tag2:value\n        - tag3:value\n      source:\n      destinations:\n      notifications:\n        - telegram\n\nsecrets:\n  SUPER_SECRET: SECRET\n\nextends:\n  secrets:\n    - ./secrets.yml\n  configs:\n    - ./strolt_config.yml\n\ndefinitions:\n  destinations:\n    destination-template:\n      driver: restic\n      config:\n        keep:\n          last: 5\n\n  notifications:\n    telegram:\n      driver: telegram\n      config:\n        token: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\n        chatId: 1234567890\n'})}),"\n",(0,r.jsx)(n.h2,{id:"timezone-top-level-element",children:"TimeZone top-level element"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"timezone"}),": IANA Time Zone Default: Local"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"timezone: UTC\n"})}),"\n",(0,r.jsx)(n.h2,{id:"tags-top-level-element",children:"Tags top-level element"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tags"}),": array of strings"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"tags:\n  - tag1:v0.01\n  - tag2\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"OR"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"tags: [tag1:v0.01, tag2]\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"services-top-level-element-required",children:["Services top-level element ",(0,r.jsx)(n.code,{children:"(REQUIRED)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"services"}),": map of services"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  service-name:\n    task-name:\n      tags:\n      schedule:\n      source:\n        driver: pg\n          config:\n            host: 127.0.0.1\n            port: 5432\n            database: pg_database\n            username: pg_username\n            password: pg_password\n      destinations:\n      notifications:\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"tags",children:"tags"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tags"}),": array of strings"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"tags:\n  - tag1:v0.01\n  - tag2\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"OR"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"tags: [tag1:v0.01, tag2]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"schedule",children:"schedule"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"schedule"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'schedule:\n  # run every day at 6:00 and 18:00 UTC\n  backup: "0 6,18 */1 * *"\n\n  # run every day at 6:00 and 18:00 UTC\n  prune: "0 6,18 */1 * *"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"backup",children:"backup"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"backup"}),": cron rule"]}),"\n",(0,r.jsx)(n.h4,{id:"prune",children:"prune"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"prune"}),": cron rule"]}),"\n",(0,r.jsxs)(n.h3,{id:"source-required",children:["source ",(0,r.jsx)(n.code,{children:"(REQUIRED)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"source"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"source:\n  driver: pg\n    config:\n      host: 127.0.0.1\n      port: 5432\n      database: pg_database\n      username: pg_username\n      password: pg_password\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"driver-required",children:["driver ",(0,r.jsx)(n.code,{children:"(REQUIRED)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"driver"}),":"]}),"\n",(0,r.jsx)(n.h4,{id:"config",children:"config"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"config"}),":"]}),"\n",(0,r.jsx)(n.h4,{id:"env",children:"env"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"env"}),":"]}),"\n",(0,r.jsxs)(n.h3,{id:"destinations-required",children:["destinations ",(0,r.jsx)(n.code,{children:"(REQUIRED)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"destinations"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  {service name}:\n    {task name}:\n      ...\n      destinations:\n        restic:\n          driver: restic\n          config:\n          env:\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"OR"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  {service name}:\n    {task name}:\n      ...\n      destinations:\n        restic:\n          extends: {definition template}\n\ndefinitions:\n  destinations:\n    {definition template}:\n      driver: restic\n      config:\n      env:\n\n"})}),"\n",(0,r.jsx)(n.h4,{id:"extends",children:"extends"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"extends"}),":"]}),"\n",(0,r.jsxs)(n.h4,{id:"driver-required-1",children:["driver ",(0,r.jsx)(n.code,{children:"(REQUIRED)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"driver"}),": ",(0,r.jsx)(n.a,{href:"/docs/strolt/configuration/drivers/source/local",children:"source"})]}),"\n",(0,r.jsx)(n.h4,{id:"config-1",children:"config"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"config"}),":"]}),"\n",(0,r.jsx)(n.h4,{id:"env-1",children:"env"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"env"}),":"]}),"\n",(0,r.jsx)(n.h3,{id:"notifications",children:"notifications"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"notifications"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  {service name}:\n    {task name}:\n      ...\n      notifications:\n        - tg\n\n    {task2 name}:\n      ...\n      notifications:\n        - tg-errors\n\ndefinitions:\n  notifications:\n    tg:\n      driver: telegram\n      config:\n        token: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\n        chatId: 1234567890\n    tg-errors:\n      driver: telegram\n      config:\n        token: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\n        chatId: 1234567890\n      events: [OPERATION_ERROR, SOURCE_ERROR, DESTINATION_ERROR]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"secrets-top-level-element",children:"Secrets top-level element"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secrets"}),": map of key value"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"secrets:\n  SECRET_ONE: VALUE\n  SECRET_TWO: VALUE\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:'Store important data in files with secrets that are included in the "extends" section'})}),"\n",(0,r.jsx)(n.h2,{id:"extends-top-level-element",children:"Extends top-level element"}),"\n",(0,r.jsx)(n.h3,{id:"secrets",children:"secrets"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secrets"}),": array of paths"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"extends:\n  secrets:\n    - strolt.secrets.yml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configs",children:"configs"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"configs"}),": array of paths"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"extends:\n  configs:\n    - strolt.base.yml\n"})}),"\n",(0,r.jsx)(n.h2,{id:"definitions-top-level-element",children:"Definitions top-level element"}),"\n",(0,r.jsx)(n.h3,{id:"destinations",children:"destinations"}),"\n",(0,r.jsxs)(n.h4,{id:"driver-required-2",children:["driver ",(0,r.jsx)(n.code,{children:"(REQUIRED)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"driver"}),": ",(0,r.jsx)(n.a,{href:"/docs/strolt/configuration/drivers/source/local",children:"source"})]}),"\n",(0,r.jsx)(n.h4,{id:"config-2",children:"config"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"config"}),":"]}),"\n",(0,r.jsx)(n.h4,{id:"env-2",children:"env"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"env"}),":"]}),"\n",(0,r.jsx)(n.h3,{id:"notifications-1",children:"notifications"}),"\n",(0,r.jsxs)(n.h4,{id:"driver-required-3",children:["driver ",(0,r.jsx)(n.code,{children:"(REQUIRED)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"driver"}),": ",(0,r.jsx)(n.a,{href:"/docs/strolt/configuration/drivers/source/local",children:"source"})]}),"\n",(0,r.jsx)(n.h4,{id:"config-3",children:"config"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"config"}),":"]}),"\n",(0,r.jsx)(n.h4,{id:"events",children:"events"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"events"}),": array of [",(0,r.jsx)(n.code,{children:"OPERATION_START"}),", ",(0,r.jsx)(n.code,{children:"OPERATION_STOP"}),", ",(0,r.jsx)(n.code,{children:"OPERATION_ERROR"}),", ",(0,r.jsx)(n.code,{children:"SOURCE_START"}),", ",(0,r.jsx)(n.code,{children:"SOURCE_STOP"}),", ",(0,r.jsx)(n.code,{children:"SOURCE_ERROR"}),", ",(0,r.jsx)(n.code,{children:"DESTINATION_START"}),", ",(0,r.jsx)(n.code,{children:"DESTINATION_STOP"}),", ",(0,r.jsx)(n.code,{children:"DESTINATION_ERROR"}),"]"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},9796:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>t});var s=i(6363);const r={},l=s.createContext(r);function d(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);